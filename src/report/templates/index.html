<!DOCTYPE html>
<html lang="ja">

{# Macro definition for category card #}
{% macro render_category_card(category_id, title, stocks) %}
{% if stocks %}
<div class="category-card" data-category="{{ category_id }}">
    <h3 class="category-title">{{ title }}</h3>
    <div class="bar-chart" role="list" aria-label="{{ title }}ãƒ©ãƒ³ã‚­ãƒ³ã‚°">
        {% for stock in stocks[:5] %}
        <div class="bar-item"
             role="listitem"
             aria-label="{{ stock.stock_name }}: ã‚¹ã‚³ã‚¢ {{ '%.1f'|format(stock.score) }}"
             style="--score: {{ stock.score }}; animation-delay: {{ loop.index0 * 0.1 }}s;"
             data-stock-code="{{ stock.stock_code }}"
             data-stock-name="{{ stock.stock_name }}"
             data-score="{{ '%.1f'|format(stock.score) }}">
            <div class="bar-fill"></div>
            <div class="bar-info">
                <span class="bar-label">{{ stock.stock_name }}</span>
                <span class="bar-score">{{ "%.1f"|format(stock.score) }}</span>
            </div>
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
{% endmacro %}

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ ªå¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¬ãƒãƒ¼ãƒˆ - {{ date }}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=JetBrains+Mono:wght@400;500;700&family=Space+Grotesk:wght@400;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #121824;
            --bg-card: #1a2332;
            --text-primary: #e8eaed;
            --text-secondary: #9ba3af;
            --text-muted: #6b7280;
            --accent-green: #10b981;
            --accent-red: #ef4444;
            --accent-cyan: #06b6d4;
            --accent-amber: #f59e0b;
            --accent-purple: #8b5cf6;
            --border-subtle: rgba(255, 255, 255, 0.08);
            --glow-green: rgba(16, 185, 129, 0.3);
            --glow-cyan: rgba(6, 182, 212, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Crimson Pro', Georgia, serif;
            line-height: 1.6;
            color: var(--text-primary);
            background: linear-gradient(135deg, #0a0e17 0%, #12182e 100%);
            background-attachment: fixed;
            padding: 40px 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image:
                repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(255,255,255,0.01) 2px, rgba(255,255,255,0.01) 4px);
            pointer-events: none;
            z-index: 1;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        header {
            text-align: center;
            padding: 60px 40px;
            margin-bottom: 60px;
            position: relative;
            background: radial-gradient(ellipse at top, rgba(6, 182, 212, 0.1) 0%, transparent 70%);
        }

        header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--accent-cyan), transparent);
            animation: pulseGlow 3s ease-in-out infinite;
        }

        @keyframes pulseGlow {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        h1 {
            font-family: 'JetBrains Mono', monospace;
            font-size: clamp(32px, 5vw, 52px);
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            letter-spacing: -0.02em;
            text-transform: uppercase;
            position: relative;
            display: inline-block;
        }

        h1::before {
            content: '> ';
            color: var(--accent-cyan);
            opacity: 0;
            animation: blink 1.5s steps(2) infinite;
        }

        @keyframes blink {
            50% { opacity: 1; }
        }

        .date {
            font-family: 'JetBrains Mono', monospace;
            font-size: 16px;
            color: var(--text-secondary);
            letter-spacing: 0.05em;
        }

        .date::before {
            content: '[ ';
            color: var(--accent-cyan);
        }

        .date::after {
            content: ' ]';
            color: var(--accent-cyan);
        }

        .info-card {
            background: var(--bg-card);
            border: 1px solid var(--border-subtle);
            border-radius: 12px;
            padding: 32px;
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-cyan), var(--accent-purple));
        }

        .info-card:hover {
            border-color: rgba(6, 182, 212, 0.3);
            box-shadow: 0 8px 32px rgba(6, 182, 212, 0.15);
            transform: translateY(-2px);
        }

        .info-card.about::before { background: linear-gradient(180deg, var(--accent-cyan), var(--accent-green)); }
        .info-card.score-guide::before { background: linear-gradient(180deg, var(--accent-amber), var(--accent-red)); }
        .info-card.screening-conditions::before { background: linear-gradient(180deg, var(--accent-purple), var(--accent-cyan)); }

        .info-card h2 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 20px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        .info-card h2::before {
            content: '// ';
            color: var(--text-muted);
        }

        .info-card p {
            color: var(--text-secondary);
            margin-bottom: 16px;
            line-height: 1.8;
            font-size: 16px;
        }

        .info-card ul {
            list-style: none;
            padding-left: 0;
        }

        .info-card ul li {
            color: var(--text-secondary);
            margin-bottom: 12px;
            padding-left: 24px;
            position: relative;
            line-height: 1.7;
        }

        .info-card ul li::before {
            content: 'â–¹';
            position: absolute;
            left: 0;
            color: var(--accent-cyan);
            font-size: 18px;
        }

        .info-card strong {
            color: var(--accent-cyan);
            font-weight: 600;
        }

        .summary {
            background: linear-gradient(135deg, var(--bg-card) 0%, rgba(6, 182, 212, 0.05) 100%);
            border: 1px solid var(--border-subtle);
            border-radius: 16px;
            padding: 40px;
            margin-bottom: 60px;
            position: relative;
            overflow: hidden;
        }

        .summary::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, rgba(6, 182, 212, 0.1) 0%, transparent 70%);
            pointer-events: none;
        }

        .summary h2 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            font-weight: 600;
            color: var(--accent-cyan);
            margin-bottom: 32px;
            letter-spacing: 0.1em;
            text-transform: uppercase;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 24px;
            position: relative;
            z-index: 1;
        }

        .stat-item {
            background: var(--bg-secondary);
            border: 1px solid var(--border-subtle);
            border-radius: 8px;
            padding: 24px;
            position: relative;
            transition: all 0.3s ease;
        }

        .stat-item:hover {
            border-color: var(--accent-cyan);
            box-shadow: 0 0 24px var(--glow-cyan);
            transform: translateY(-4px);
        }

        .stat-label {
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            color: var(--text-muted);
            margin-bottom: 12px;
            letter-spacing: 0.08em;
            text-transform: uppercase;
        }

        .stat-value {
            font-family: 'JetBrains Mono', monospace;
            font-size: 36px;
            font-weight: 700;
            color: var(--accent-cyan);
            line-height: 1;
            text-shadow: 0 0 20px var(--glow-cyan);
        }

        section {
            margin-bottom: 80px;
            animation: fadeInUp 0.6s ease-out;
            animation-fill-mode: both;
        }

        section:nth-child(1) { animation-delay: 0.1s; }
        section:nth-child(2) { animation-delay: 0.2s; }
        section:nth-child(3) { animation-delay: 0.3s; }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        section > h2 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 24px;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border-subtle);
            letter-spacing: 0.02em;
            position: relative;
        }

        section > h2::before {
            content: attr(data-index);
            position: absolute;
            left: 0;
            top: -8px;
            font-size: 12px;
            color: var(--accent-cyan);
            font-weight: 500;
        }

        .category-description {
            background: rgba(6, 182, 212, 0.05);
            border-left: 3px solid var(--accent-cyan);
            padding: 20px 24px;
            margin-bottom: 32px;
            border-radius: 0 8px 8px 0;
            font-size: 15px;
            line-height: 1.8;
            color: var(--text-secondary);
        }

        .category-description strong {
            color: var(--accent-cyan);
            font-weight: 600;
            font-family: 'JetBrains Mono', monospace;
            font-size: 13px;
            letter-spacing: 0.05em;
        }

        .table-container {
            overflow-x: auto;
            border-radius: 12px;
            border: 1px solid var(--border-subtle);
            background: var(--bg-card);
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(6, 182, 212, 0.1) 100%);
        }

        th {
            padding: 16px 12px;
            text-align: left;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            font-size: 12px;
            color: var(--text-secondary);
            letter-spacing: 0.08em;
            text-transform: uppercase;
            border-bottom: 2px solid var(--border-subtle);
        }

        td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border-subtle);
            color: var(--text-secondary);
            font-family: 'JetBrains Mono', monospace;
            font-size: 14px;
        }

        tbody tr {
            transition: all 0.2s ease;
        }

        tbody tr:hover {
            background: rgba(6, 182, 212, 0.05);
        }

        tbody tr:last-child td {
            border-bottom: none;
        }

        .rank {
            font-weight: 700;
            color: var(--accent-amber);
            font-size: 16px;
        }

        tbody tr:nth-child(1) .rank { color: #ffd700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5); }
        tbody tr:nth-child(2) .rank { color: #c0c0c0; text-shadow: 0 0 10px rgba(192, 192, 192, 0.5); }
        tbody tr:nth-child(3) .rank { color: #cd7f32; text-shadow: 0 0 10px rgba(205, 127, 50, 0.5); }

        .positive {
            color: var(--accent-green);
            font-weight: 500;
        }

        .negative {
            color: var(--accent-red);
            font-weight: 500;
        }

        .score {
            font-weight: 700;
            color: var(--accent-cyan);
            font-size: 16px;
            text-shadow: 0 0 10px var(--glow-cyan);
        }

        .disclaimer {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.05) 0%, var(--bg-card) 100%);
            border: 1px solid rgba(239, 68, 68, 0.2);
            border-radius: 12px;
            padding: 32px;
            margin-top: 60px;
            position: relative;
            overflow: hidden;
        }

        .disclaimer::before {
            content: 'âš ';
            position: absolute;
            top: 24px;
            right: 24px;
            font-size: 48px;
            color: var(--accent-red);
            opacity: 0.1;
        }

        .disclaimer h3 {
            font-family: 'JetBrains Mono', monospace;
            font-size: 18px;
            color: var(--accent-red);
            margin-bottom: 20px;
            letter-spacing: 0.05em;
            text-transform: uppercase;
        }

        .disclaimer p {
            font-size: 14px;
            line-height: 1.8;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        footer {
            text-align: center;
            padding: 40px 20px;
            margin-top: 80px;
            border-top: 1px solid var(--border-subtle);
            color: var(--text-muted);
            font-family: 'JetBrains Mono', monospace;
            font-size: 12px;
            letter-spacing: 0.1em;
        }

        footer::before {
            content: 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”';
            display: block;
            color: var(--border-subtle);
            margin-bottom: 20px;
            overflow: hidden;
        }

        /* ==================== Top Performers Dashboard ==================== */
        .top-performers-dashboard {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            padding: 3rem 2rem;
            border-radius: 16px;
            margin: 2rem 0 3rem 0;
            box-shadow: 0 0 40px rgba(0, 245, 255, 0.05);
            border: 1px solid var(--border-subtle);
        }

        .dashboard-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        .title-icon {
            font-size: 1.75rem;
        }

        .dashboard-subtitle {
            font-family: 'Inter', sans-serif;
            font-size: 0.95rem;
            color: var(--text-secondary);
            margin-bottom: 2.5rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
        }

        .category-card {
            background: var(--bg-card);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-subtle);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .category-card:hover {
            transform: translateY(-4px);
        }

        /* ã‚«ãƒ†ã‚´ãƒªã”ã¨ã®è‰²å®šç¾©ï¼ˆCSSå¤‰æ•°ã§ä¸€å…ƒç®¡ç†ï¼‰ */
        .category-card[data-category="volume-surge"] { --category-color: #00f5ff; }
        .category-card[data-category="breakout"] { --category-color: #7c3aed; }
        .category-card[data-category="bb-bounce"] { --category-color: #f59e0b; }
        .category-card[data-category="pullback-dip"] { --category-color: #3b82f6; }
        .category-card[data-category="golden-cross"] { --category-color: #eab308; }
        .category-card[data-category="value-inflation"] { --category-color: #ec4899; }

        .category-card:hover {
            box-shadow: 0 8px 24px color-mix(in srgb, var(--category-color) 20%, transparent);
        }

        .category-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1.25rem;
            color: var(--category-color);
            padding-bottom: 0.75rem;
            border-bottom: 2px solid var(--category-color);
        }

        .bar-chart {
            display: flex;
            flex-direction: column;
            gap: 0.9rem;
        }

        .bar-item {
            position: relative;
            height: 42px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 6px;
            overflow: hidden;
            transition: background 0.3s ease;
        }

        .bar-item:hover {
            background: rgba(255, 255, 255, 0.06);
        }

        .bar-fill {
            position: absolute;
            top: 0;
            left: 0;
            height: 100%;
            width: calc(var(--score) * 1%);
            border-radius: 6px;
            opacity: 0.4;
            background: linear-gradient(90deg, var(--category-color), transparent);
            border-left: 3px solid var(--category-color);
            animation: barGrow 0.8s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        }

        @keyframes barGrow {
            from {
                width: 0;
                opacity: 0;
            }
            to {
                width: calc(var(--score) * 1%);
                opacity: 0.4;
            }
        }

        .bar-info {
            position: relative;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            padding: 0 1rem;
            z-index: 1;
        }

        .bar-label {
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            color: var(--text-primary);
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 70%;
        }

        .bar-score {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            font-variant-numeric: tabular-nums;
        }

        @media (max-width: 768px) {
            body {
                padding: 20px 10px;
            }

            header {
                padding: 40px 20px;
            }

            h1 {
                font-size: 28px;
            }

            .info-card {
                padding: 24px;
            }

            .summary {
                padding: 24px;
            }

            .stats {
                grid-template-columns: 1fr;
            }

            table {
                font-size: 12px;
            }

            th, td {
                padding: 12px 8px;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .top-performers-dashboard {
                padding: 2rem 1.5rem;
            }

            .dashboard-title {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>æ ªå¼ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ãƒ¬ãƒãƒ¼ãƒˆ</h1>
            <p class="date">{{ date }}</p>
        </header>

        <!-- Top Performers Dashboard -->
        <section class="top-performers-dashboard">
            <h2 class="dashboard-title">
                <span class="title-icon">ğŸ“Š</span>
                Top Performers Overview
            </h2>
            <p class="dashboard-subtitle">å„ã‚«ãƒ†ã‚´ãƒªã®ä¸Šä½5éŠ˜æŸ„ã‚’ã‚¹ã‚³ã‚¢é †ã§è¡¨ç¤º</p>

            <div class="dashboard-grid">
                {{ render_category_card('volume-surge', 'å‡ºæ¥é«˜æ€¥å¢—', rankings.volume_surge) }}
                {{ render_category_card('breakout', 'ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ', rankings.breakout) }}
                {{ render_category_card('bb-bounce', 'BBä¸‹é™åè»¢', rankings.bb_lower_bounce) }}
                {{ render_category_card('pullback-dip', 'æŠ¼ã—ç›®è²·ã„ãƒãƒ£ãƒ³ã‚¹', rankings.pullback_dip) }}
                {{ render_category_card('golden-cross', 'ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰', rankings.golden_cross_approaching) }}
                {{ render_category_card('value-inflation', 'ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾å¿œãƒãƒªãƒ¥ãƒ¼æ ª', rankings.value_inflation_adjusted) }}
            </div>
        </section>

        <div class="info-card about">
            <h2>ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã«ã¤ã„ã¦</h2>
            <p>ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯ã€ã‚¹ã‚¦ã‚£ãƒ³ã‚°å–å¼•ï¼ˆæ•°æ—¥ã€œæ•°é€±é–“ã®ä¿æœ‰æœŸé–“ï¼‰ã«é©ã—ãŸå€‹åˆ¥æ ªã‚’è‡ªå‹•æŠ½å‡ºã™ã‚‹ã‚‚ã®ã§ã™ã€‚</p>
            <p>ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™ï¼ˆç§»å‹•å¹³å‡ç·šã€ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ã€RSIã€MACDç­‰ï¼‰ã¨å‡ºæ¥é«˜ã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ä»¥ä¸‹6ã¤ã®ã‚«ãƒ†ã‚´ãƒªã§éŠ˜æŸ„ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™ï¼š</p>
            <ul>
                <li><strong>å‡ºæ¥é«˜æ€¥å¢—</strong>ï¼šæ©Ÿé–¢æŠ•è³‡å®¶ã‚„å¤§å£è³‡é‡‘ã®æµå…¥ã‚’ç¤ºå”†</li>
                <li><strong>ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ</strong>ï¼šãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ã®åˆå‹•ã‚’æ‰ãˆã‚‹</li>
                <li><strong>BBä¸‹é™åè»¢</strong>ï¼šé€†å¼µã‚Šæˆ¦ç•¥ï¼ˆå£²ã‚‰ã‚Œéãã‹ã‚‰ã®åè»¢ã‚’ç‹™ã†ï¼‰</li>
                <li><strong>æŠ¼ã—ç›®è²·ã„ãƒãƒ£ãƒ³ã‚¹</strong>ï¼šä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ä¸­ã®ä¸€æ™‚çš„ãªèª¿æ•´å±€é¢ã‚’æ‰ãˆã‚‹</li>
                <li><strong>ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰</strong>ï¼š5æ—¥MAã¨25æ—¥MAã®ã‚¯ãƒ­ã‚¹ç›´å‰ã‚’ç‹™ã†</li>
                <li><strong>ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾å¿œãƒãƒªãƒ¥ãƒ¼æ ª</strong>ï¼šç·©å’ŒåŸºæº–ã®å‰²å®‰æ ªï¼ˆåç›Šæ€§é‡è¦–ï¼‰</li>
            </ul>
            <p>â€»ETFã€REITã€ã‚¤ãƒ³ãƒ•ãƒ©ãƒ•ã‚¡ãƒ³ãƒ‰ã¯é™¤å¤–ã—ã€å€‹åˆ¥æ ªã®ã¿ã‚’å¯¾è±¡ã¨ã—ã¦ã„ã¾ã™ã€‚</p>
        </div>

        <div class="info-card score-guide">
            <h2>ã‚¹ã‚³ã‚¢ã®è¦‹æ–¹</h2>
            <ul>
                <li><strong>ã‚¹ã‚³ã‚¢ç®—å‡ºæ–¹æ³•</strong>ï¼šå„ã‚«ãƒ†ã‚´ãƒªã§æ¤œå‡ºã•ã‚ŒãŸéŠ˜æŸ„ç¾¤ã®ä¸­ã§ã®ç›¸å¯¾é †ä½ã«åŸºã¥ã0-100ã®ã‚¹ã‚±ãƒ¼ãƒ«</li>
                <li><strong>å‡ºæ¥é«˜æ€¥å¢—</strong>ï¼šå…ƒã‚¹ã‚³ã‚¢ = (å½“æ—¥å‡ºæ¥é«˜ / å‰æ—¥å‡ºæ¥é«˜) Ã— 10</li>
                <li><strong>ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ</strong>ï¼šå…ƒã‚¹ã‚³ã‚¢ = MAä¹–é›¢ç‡ + å‡ºæ¥é«˜æ¯”ç‡</li>
                <li><strong>BBä¸‹é™åè»¢</strong>ï¼šå…ƒã‚¹ã‚³ã‚¢ = BBä¹–é›¢ + RSI + MACDæ”¹å–„ + å‡ºæ¥é«˜</li>
                <li><strong>æŠ¼ã—ç›®è²·ã„ãƒãƒ£ãƒ³ã‚¹</strong>ï¼šå…ƒã‚¹ã‚³ã‚¢ = (MAä¸Šæ˜‡ç‡Ã—10) + (60-abs(RSI-50))Ã—2 + MACDãƒ’ã‚¹ãƒˆÃ—10 + å‡ºæ¥é«˜</li>
                <li><strong>ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰</strong>ï¼šå…ƒã‚¹ã‚³ã‚¢ = ((1-MAå·®ç‡)Ã—50) + (5æ—¥MAä¸Šæ˜‡ç‡Ã—10) + RSI/10 + å‡ºæ¥é«˜</li>
                <li><strong>ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾å¿œãƒãƒªãƒ¥ãƒ¼æ ª</strong>ï¼šå…ƒã‚¹ã‚³ã‚¢ = (25/PER)Ã—8 + (2.5/PBR)Ã—8 + é…å½“åˆ©å›ã‚ŠÃ—4 + ROEÃ—2</li>
                <li><strong>è§£é‡ˆ</strong>ï¼šã‚¹ã‚³ã‚¢20ä»¥ä¸Šã¯è¦æ³¨ç›®ã€30ä»¥ä¸Šã¯å¼·ã„å…†å€™ã€50ä»¥ä¸Šã¯éå¸¸ã«å¼·ã„å…†å€™</li>
                <li><strong>æ³¨æ„</strong>ï¼šã‚¹ã‚³ã‚¢ã¯åŒæ—¥å†…ã®ç›¸å¯¾è©•ä¾¡ã§ã™ã€‚ã‚«ãƒ†ã‚´ãƒªé–“ã®ã‚¹ã‚³ã‚¢æ¯”è¼ƒã‚‚å¯èƒ½ã§ã™</li>
            </ul>
        </div>

        <div class="info-card screening-conditions">
            <h2>ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°æ¡ä»¶</h2>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ã‚«ãƒ†ã‚´ãƒª</th>
                            <th>æ¡ä»¶</th>
                            <th>ç†ç”±</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>å‡ºæ¥é«˜æ€¥å¢—</td>
                            <td>å‰æ—¥æ¯”2å€ä»¥ä¸Š</td>
                            <td>å¤§å£è³‡é‡‘ã®æµå…¥ã‚„ææ–™ã®ç™ºç”Ÿã‚’ç¤ºå”†ã€‚æµå‹•æ€§ãŒé«˜ã¾ã‚Šã€ä¾¡æ ¼å¤‰å‹•ã®å¯èƒ½æ€§ãŒé«˜ã¾ã‚‹</td>
                        </tr>
                        <tr>
                            <td>ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ</td>
                            <td>25æ—¥MAä¸ŠæŠœã‘ ã¾ãŸã¯ BBä¸Šé™çªç ´</td>
                            <td>ãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ã®åˆå‹•ã‚’æ‰ãˆã‚‹ã€‚ä¸ŠæŠœã‘æ™‚ã®å‡ºæ¥é«˜å¢—åŠ ã¯ä¿¡é ¼æ€§ãŒé«˜ã„</td>
                        </tr>
                        <tr>
                            <td>BBä¸‹é™åè»¢</td>
                            <td>BBä¸‹é™Â±5%ã€RSI <= 30ã€MACDæ”¹å–„</td>
                            <td>é€†å¼µã‚Šæˆ¦ç•¥ã€‚å£²ã‚‰ã‚Œéãã‹ã‚‰ã®åè»¢ã‚’ç‹™ã†ã€‚ãƒªã‚¹ã‚¯é«˜ã®ãŸã‚è¦æ³¨æ„</td>
                        </tr>
                        <tr>
                            <td>æŠ¼ã—ç›®è²·ã„ãƒãƒ£ãƒ³ã‚¹</td>
                            <td>25æ—¥MAä¸Šæ˜‡ä¸­ã€ç¾åœ¨å€¤ãŒMA-5%ã€œ0%ã€RSI 40-60ã€MACDãƒ’ã‚¹ãƒˆ > 0</td>
                            <td>ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ä¸­ã®ä¸€æ™‚çš„ãªèª¿æ•´å±€é¢ã€‚ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ•ã‚©ãƒ­ãƒ¼æˆ¦ç•¥</td>
                        </tr>
                        <tr>
                            <td>ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰</td>
                            <td>5æ—¥MA < 25æ—¥MAã€MAå·®1%ä»¥å†…ã€5æ—¥MAä¸Šæ˜‡ä¸­ã€RSI > 50</td>
                            <td>çŸ­æœŸMAãŒé•·æœŸMAã‚’ä¸‹ã‹ã‚‰ä¸Šã«æŠœã‘ã‚‹ç›´å‰ã€‚ãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ã®å¯èƒ½æ€§</td>
                        </tr>
                        <tr>
                            <td>ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾å¿œãƒãƒªãƒ¥ãƒ¼æ ª</td>
                            <td>PER < 25å€ã€PBR < 2.5å€ã€é…å½“ >= 2.0%ã€ROE >= 8.0%</td>
                            <td>ã‚¤ãƒ³ãƒ•ãƒ¬ç’°å¢ƒã§æˆé•·æŠ•è³‡ã‚’è¡Œã†ä¼æ¥­ã€‚ROEã§åç›Šæ€§ã‚’æ‹…ä¿</td>
                        </tr>
                        <tr>
                            <td>å…±é€š</td>
                            <td>å¹³å‡å‡ºæ¥é«˜10ä¸‡æ ªä»¥ä¸Š</td>
                            <td>æµå‹•æ€§ã‚’ç¢ºä¿ã—ã€ã‚¹ãƒ ãƒ¼ã‚ºãªå£²è²·ã‚’å¯èƒ½ã«ã™ã‚‹</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="summary">
            <h2>ã‚µãƒãƒªãƒ¼</h2>
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-label">è©²å½“éŠ˜æŸ„æ•°ï¼ˆãƒ¦ãƒ‹ãƒ¼ã‚¯ï¼‰</div>
                    <div class="stat-value">{{ stats.total_stocks }}</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">å‡ºæ¥é«˜æ€¥å¢—</div>
                    <div class="stat-value">{{ stats.volume_surge_count }}</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆ</div>
                    <div class="stat-value">{{ stats.breakout_count }}</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">BBä¸‹é™åè»¢</div>
                    <div class="stat-value">{{ stats.bb_lower_bounce_count }}</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">æŠ¼ã—ç›®è²·ã„ãƒãƒ£ãƒ³ã‚¹</div>
                    <div class="stat-value">{{ stats.pullback_dip_count }}</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰</div>
                    <div class="stat-value">{{ stats.golden_cross_approaching_count }}</div>
                </div>
                <div class="stat-item">
                    <div class="stat-label">ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾å¿œãƒãƒªãƒ¥ãƒ¼æ ª</div>
                    <div class="stat-value">{{ stats.value_inflation_adjusted_count }}</div>
                </div>
            </div>
        </div>

        {% if rankings.volume_surge %}
        <section>
            <h2 data-index="[01]">å‡ºæ¥é«˜æ€¥å¢—ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTop 20ï¼‰</h2>
            <div class="category-description">
                <strong>ç›®çš„</strong>ï¼šå‰æ—¥æ¯”2å€ä»¥ä¸Šã®å‡ºæ¥é«˜ã‚’è¨˜éŒ²ã—ãŸéŠ˜æŸ„ã€‚æ©Ÿé–¢æŠ•è³‡å®¶ã®å‚å…¥ã‚„ææ–™ã®ç™ºç”Ÿã‚’ç¤ºå”†ã—ã¾ã™ã€‚<br>
                <strong>æ´»ç”¨æ³•</strong>ï¼šå‡ºæ¥é«˜æ€¥å¢—ã¯ä¾¡æ ¼å¤‰å‹•ã®å‰å…†ã€‚RSIã¨ä½µã›ã¦è²·ã‚ã‚Œéãã‚’ç¢ºèªã—ã¾ã—ã‚‡ã†ã€‚
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>é †ä½</th>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>éŠ˜æŸ„å</th>
                            <th>ç¾åœ¨å€¤</th>
                            <th>å½“æ—¥å‡ºæ¥é«˜</th>
                            <th>å¹³å‡å‡ºæ¥é«˜(25æ—¥)</th>
                            <th>å‡ºæ¥é«˜æ¯”ç‡</th>
                            <th>RSI</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for stock in rankings.volume_surge[:20] %}
                        <tr>
                            <td class="rank">{{ loop.index }}</td>
                            <td>{{ stock.stock_code }}</td>
                            <td>{{ stock.stock_name }}</td>
                            <td>{{ stock.details.current_price }}</td>
                            <td>{{ "{:,}".format(stock.details.current_volume) }}</td>
                            <td>{{ "{:,}".format(stock.details.avg_volume_25d) }}</td>
                            <td class="positive">{{ stock.details.volume_ratio }}å€</td>
                            <td>{{ stock.details.rsi if stock.details.rsi else '-' }}</td>
                            <td class="score">{{ "%.1f"|format(stock.score) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endif %}

        {% if rankings.breakout %}
        <section>
            <h2 data-index="[02]">ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«ãƒ–ãƒ¬ã‚¤ã‚¯ã‚¢ã‚¦ãƒˆãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTop 20ï¼‰</h2>
            <div class="category-description">
                <strong>ç›®çš„</strong>ï¼š25æ—¥ç§»å‹•å¹³å‡ç·šã®ä¸ŠæŠœã‘ã¾ãŸã¯ãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ä¸Šé™çªç ´ã€‚ãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ã®åˆå‹•ã‚’æ‰ãˆã¾ã™ã€‚<br>
                <strong>æ´»ç”¨æ³•</strong>ï¼šä¸ŠæŠœã‘æ™‚ã®å‡ºæ¥é«˜å¢—åŠ ãŒé‡è¦ã€‚MACDï¼ˆãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ï¼‰ãŒãƒ—ãƒ©ã‚¹ãªã‚‰ä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ã®å¯èƒ½æ€§å¤§ã€‚
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>é †ä½</th>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>éŠ˜æŸ„å</th>
                            <th>ç¾åœ¨å€¤</th>
                            <th>25æ—¥MA</th>
                            <th>ä¹–é›¢ç‡</th>
                            <th>å‡ºæ¥é«˜æ¯”ç‡</th>
                            <th>RSI</th>
                            <th>MACD</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for stock in rankings.breakout[:20] %}
                        <tr>
                            <td class="rank">{{ loop.index }}</td>
                            <td>{{ stock.stock_code }}</td>
                            <td>{{ stock.stock_name }}</td>
                            <td>{{ stock.details.current_price }}</td>
                            <td>{{ stock.details.ma_value if stock.details.ma_value else '-' }}</td>
                            <td class="positive">{{ stock.details.price_deviation if stock.details.price_deviation else '-' }}%</td>
                            <td class="positive">{{ stock.details.volume_ratio if stock.details.volume_ratio else '-' }}å€</td>
                            <td>{{ stock.details.rsi if stock.details.rsi else '-' }}</td>
                            <td>{{ stock.details.macd_histogram if stock.details.macd_histogram else '-' }}</td>
                            <td class="score">{{ "%.1f"|format(stock.score) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endif %}

        {% if rankings.bb_lower_bounce %}
        <section>
            <h2 data-index="[03]">BBä¸‹é™åè»¢ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTop 20ï¼‰</h2>
            <div class="category-description">
                <strong>ç›®çš„</strong>ï¼šãƒœãƒªãƒ³ã‚¸ãƒ£ãƒ¼ãƒãƒ³ãƒ‰ä¸‹é™ä»˜è¿‘ã§å£²ã‚‰ã‚Œéãã‹ã‚‰åè»¢ã®å…†å€™ãŒã‚ã‚‹éŠ˜æŸ„ã€‚é€†å¼µã‚Šæˆ¦ç•¥ã€‚<br>
                <strong>æ´»ç”¨æ³•</strong>ï¼šRSI 30ä»¥ä¸‹ã®å£²ã‚‰ã‚Œéãã€ã‹ã¤MACDãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ ãŒåº•ã‚’æ‰“ã£ãŸéŠ˜æŸ„ã€‚ãƒªã‚¹ã‚¯ç®¡ç†ï¼ˆã‚¹ãƒˆãƒƒãƒ—ãƒ­ã‚¹è¨­å®šï¼‰å¿…é ˆã€‚<br>
                <strong>âš ï¸ æ³¨æ„</strong>ï¼šé€†å¼µã‚Šæˆ¦ç•¥ã®ãŸã‚ã€ãƒªã‚¹ã‚¯ãŒé«˜ã„ã§ã™ã€‚æåˆ‡ã‚Šãƒ«ãƒ¼ãƒ«ã‚’å³å®ˆã—ã¦ãã ã•ã„ã€‚
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>é †ä½</th>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>éŠ˜æŸ„å</th>
                            <th>ç¾åœ¨å€¤</th>
                            <th>BBä¸‹é™</th>
                            <th>BBä¹–é›¢ç‡</th>
                            <th>RSI</th>
                            <th>MACDæ”¹å–„</th>
                            <th>å‡ºæ¥é«˜æ¯”ç‡</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for stock in rankings.bb_lower_bounce[:20] %}
                        <tr>
                            <td class="rank">{{ loop.index }}</td>
                            <td>{{ stock.stock_code }}</td>
                            <td>{{ stock.stock_name }}</td>
                            <td>{{ stock.details.current_price }}</td>
                            <td>{{ "%.2f"|format(stock.details.bb_lower) }}</td>
                            <td class="{% if stock.details.bb_lower_deviation < 0 %}negative{% else %}positive{% endif %}">{{ "%.2f"|format(stock.details.bb_lower_deviation) }}%</td>
                            <td class="negative">{{ "%.2f"|format(stock.details.rsi) }}</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.macd_improvement) }}</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.volume_ratio) }}å€</td>
                            <td class="score">{{ "%.1f"|format(stock.score) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endif %}

        {% if rankings.pullback_dip %}
        <section>
            <h2 data-index="[04]">æŠ¼ã—ç›®è²·ã„ãƒãƒ£ãƒ³ã‚¹ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTop 20ï¼‰</h2>
            <div class="category-description">
                <strong>ç›®çš„</strong>ï¼š25æ—¥MAãŒä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ä¸­ã§ã€ä¸€æ™‚çš„ãªèª¿æ•´å±€é¢ã«ã‚ã‚‹éŠ˜æŸ„ã€‚<br>
                <strong>æ¡ä»¶</strong>ï¼š25æ—¥MAä¸Šæ˜‡ä¸­ã€ç¾åœ¨å€¤ãŒMA-5%ã€œ0%ã€RSI 40-60ã€MACDãƒ’ã‚¹ãƒˆã‚°ãƒ©ãƒ  > 0ã€å¹³å‡å‡ºæ¥é«˜10ä¸‡æ ªä»¥ä¸Š<br>
                <strong>æ´»ç”¨æ³•</strong>ï¼šä¸Šæ˜‡ãƒˆãƒ¬ãƒ³ãƒ‰ã®æŠ¼ã—ç›®ã‚’ç‹™ã£ãŸé †å¼µã‚Šæˆ¦ç•¥ã€‚RSIãŒä¸­ç«‹åœã§è²·ã‚ã‚Œéããƒªã‚¹ã‚¯ãŒä½ã„ã€‚<br>
                <strong>ã‚¹ã‚³ã‚¢è¨ˆç®—</strong>ï¼š(MAä¸Šæ˜‡ç‡Ã—10) + (60-abs(RSI-50))Ã—2 + MACDãƒ’ã‚¹ãƒˆÃ—10 + å‡ºæ¥é«˜
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>é †ä½</th>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>éŠ˜æŸ„å</th>
                            <th>ç¾åœ¨å€¤</th>
                            <th>25æ—¥MA</th>
                            <th>MAä¹–é›¢ç‡</th>
                            <th>MAå¤‰åŒ–ç‡</th>
                            <th>RSI</th>
                            <th>MACDãƒ’ã‚¹ãƒˆ</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for stock in rankings.pullback_dip[:20] %}
                        <tr>
                            <td class="rank">{{ loop.index }}</td>
                            <td>{{ stock.stock_code }}</td>
                            <td>{{ stock.stock_name }}</td>
                            <td>{{ stock.details.current_price }}</td>
                            <td>{{ "%.2f"|format(stock.details.ma25) }}</td>
                            <td class="negative">{{ "%.2f"|format(stock.details.ma_deviation) }}%</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.ma_change) }}%</td>
                            <td>{{ "%.2f"|format(stock.details.rsi) }}</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.macd_histogram) }}</td>
                            <td class="score">{{ "%.1f"|format(stock.score) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endif %}

        {% if rankings.golden_cross_approaching %}
        <section>
            <h2 data-index="[05]">ã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰ãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTop 20ï¼‰</h2>
            <div class="category-description">
                <strong>ç›®çš„</strong>ï¼š5æ—¥MAã¨25æ—¥MAãŒã‚´ãƒ¼ãƒ«ãƒ‡ãƒ³ã‚¯ãƒ­ã‚¹ç›´å‰ï¼ˆMAå·®1%ä»¥å†…ï¼‰ã®éŠ˜æŸ„ã€‚<br>
                <strong>æ¡ä»¶</strong>ï¼š5æ—¥MA < 25æ—¥MAã€MAå·®1%ä»¥å†…ã€5æ—¥MAä¸Šæ˜‡ä¸­ã€RSI > 50ã€å¹³å‡å‡ºæ¥é«˜10ä¸‡æ ªä»¥ä¸Š<br>
                <strong>æ´»ç”¨æ³•</strong>ï¼šçŸ­æœŸMAãŒé•·æœŸMAã‚’ä¸‹ã‹ã‚‰ä¸Šã«æŠœã‘ã‚‹ç›´å‰ã‚’æ‰ãˆã‚‹ã€‚ãƒˆãƒ¬ãƒ³ãƒ‰è»¢æ›ã®åˆå‹•ã‚’ç‹™ã†æˆ¦ç•¥ã€‚<br>
                <strong>ã‚¹ã‚³ã‚¢è¨ˆç®—</strong>ï¼š((1-MAå·®ç‡)Ã—50) + (5æ—¥MAä¸Šæ˜‡ç‡Ã—10) + RSI/10 + å‡ºæ¥é«˜
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>é †ä½</th>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>éŠ˜æŸ„å</th>
                            <th>ç¾åœ¨å€¤</th>
                            <th>5æ—¥MA</th>
                            <th>25æ—¥MA</th>
                            <th>MAå·®ç‡</th>
                            <th>5æ—¥MAå¤‰åŒ–</th>
                            <th>RSI</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for stock in rankings.golden_cross_approaching[:20] %}
                        <tr>
                            <td class="rank">{{ loop.index }}</td>
                            <td>{{ stock.stock_code }}</td>
                            <td>{{ stock.stock_name }}</td>
                            <td>{{ stock.details.current_price }}</td>
                            <td>{{ "%.2f"|format(stock.details.ma5) }}</td>
                            <td>{{ "%.2f"|format(stock.details.ma25) }}</td>
                            <td class="negative">{{ "%.2f"|format(stock.details.ma_diff_ratio) }}%</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.ma5_change) }}%</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.rsi) }}</td>
                            <td class="score">{{ "%.1f"|format(stock.score) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endif %}

        {% if rankings.value_inflation_adjusted %}
        <section>
            <h2 data-index="[06]">ã‚¤ãƒ³ãƒ•ãƒ¬å¯¾å¿œãƒãƒªãƒ¥ãƒ¼æ ªãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼ˆTop 20ï¼‰</h2>
            <div class="category-description">
                <strong>ç›®çš„</strong>ï¼šã‚¤ãƒ³ãƒ•ãƒ¬ç’°å¢ƒã«é©å¿œã—ãŸç·©å’ŒåŸºæº–ï¼ˆPER < 25å€ã€PBR < 2.5å€ã€é…å½“ >= 2.0%ã€ROE >= 8.0%ï¼‰ã§æŠ½å‡ºã•ã‚ŒãŸå‰²å®‰æ ªã€‚<br>
                <strong>èƒŒæ™¯</strong>ï¼šã‚¤ãƒ³ãƒ•ãƒ¬ç’°å¢ƒã§ã¯ä¼æ¥­ãŒæˆé•·æŠ•è³‡ã‚’è¡Œã†ãŸã‚ã€ä¸€æ™‚çš„ã«PER/PBRãŒä¸Šæ˜‡ã—ã¾ã™ã€‚ROEã§åç›Šæ€§ã‚’æ‹…ä¿ã™ã‚‹ã“ã¨ã§ã€æˆé•·æŠ•è³‡ãŒæœ‰åŠ¹ã«æ©Ÿèƒ½ã—ã¦ã„ã‚‹ä¼æ¥­ã‚’æŠ½å‡ºã—ã¦ã„ã¾ã™ã€‚<br>
                <strong>æ´»ç”¨æ³•</strong>ï¼šã‚¤ãƒ³ãƒ•ãƒ¬ç¶™ç¶šå±€é¢ã‚„é‡‘åˆ©ä¸Šæ˜‡å±€é¢ã«é©å¿œã—ãŸéŠ˜æŸ„é¸æŠã€‚åç›Šæ€§ï¼ˆROEï¼‰ã‚’é‡è¦–ã—ãŸæˆé•·æœŸå¾…æ ªã€‚<br>
                <strong>ã‚¹ã‚³ã‚¢è¨ˆç®—</strong>ï¼š(25/PER)Ã—8 + (2.5/PBR)Ã—8 + é…å½“åˆ©å›ã‚ŠÃ—4 + ROEÃ—2
            </div>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>é †ä½</th>
                            <th>éŠ˜æŸ„ã‚³ãƒ¼ãƒ‰</th>
                            <th>éŠ˜æŸ„å</th>
                            <th>ç¾åœ¨å€¤</th>
                            <th>PER</th>
                            <th>PBR</th>
                            <th>é…å½“åˆ©å›ã‚Š</th>
                            <th>ROE</th>
                            <th>ã‚¹ã‚³ã‚¢</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for stock in rankings.value_inflation_adjusted[:20] %}
                        <tr>
                            <td class="rank">{{ loop.index }}</td>
                            <td>{{ stock.stock_code }}</td>
                            <td>{{ stock.stock_name }}</td>
                            <td>{{ stock.details.current_price }}</td>
                            <td>{{ "%.2f"|format(stock.details.per) if stock.details.per else '-' }}å€</td>
                            <td>{{ "%.2f"|format(stock.details.pbr) if stock.details.pbr else '-' }}å€</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.dividend_yield) if stock.details.dividend_yield else '-' }}%</td>
                            <td class="positive">{{ "%.2f"|format(stock.details.roe) if stock.details.roe else '-' }}%</td>
                            <td class="score">{{ "%.1f"|format(stock.score) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </section>
        {% endif %}

        <div class="disclaimer">
            <h3>å…è²¬äº‹é …</h3>
            <p>ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã¯æƒ…å ±æä¾›ã®ã¿ã‚’ç›®çš„ã¨ã—ã¦ãŠã‚Šã€æŠ•è³‡æ¨å¥¨ã‚„æŠ•è³‡åŠ©è¨€ã‚’è¡Œã†ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p>æ²è¼‰ã•ã‚ŒãŸæƒ…å ±ã¯éå»ã®ãƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãåˆ†æçµæœã§ã‚ã‚Šã€å°†æ¥ã®æ ªä¾¡å‹•å‘ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
            <p>æŠ•è³‡åˆ¤æ–­ã¯å¿…ãšè‡ªå·±è²¬ä»»ã§è¡Œã£ã¦ãã ã•ã„ã€‚éŠ˜æŸ„ã®è©³ç´°ãªãƒ•ã‚¡ãƒ³ãƒ€ãƒ¡ãƒ³ã‚¿ãƒ«ã‚ºåˆ†æã€ä¼æ¥­ã®æ¥­ç¸¾ã€å¸‚å ´ç’°å¢ƒç­‰ã‚’ç·åˆçš„ã«è€ƒæ…®ã™ã‚‹ã“ã¨ã‚’ãŠå‹§ã‚ã—ã¾ã™ã€‚</p>
            <p>æŠ•è³‡ã«ã¯ãƒªã‚¹ã‚¯ãŒä¼´ã„ã¾ã™ã€‚æå¤±ãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã“ã¨ã‚’ã”ç†è§£ã®ä¸Šã€é©åˆ‡ãªãƒªã‚¹ã‚¯ç®¡ç†ã‚’è¡Œã£ã¦ãã ã•ã„ã€‚</p>
            <p>æœ¬ãƒ¬ãƒãƒ¼ãƒˆã®åˆ©ç”¨ã«ã‚ˆã£ã¦ç”Ÿã˜ãŸã„ã‹ãªã‚‹æå®³ã«ã¤ã„ã¦ã‚‚ã€å½“æ–¹ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p>
        </div>

        <footer>
            <p>Generated by Swing Stock Screener</p>
        </footer>
    </div>
</body>
</html>
